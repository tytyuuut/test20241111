"use strict";(self["webpackChunkvue3_cart"]=self["webpackChunkvue3_cart"]||[]).push([[460],{1460:function(t,o,e){e.r(o),e.d(o,{default:function(){return J}});var a=e(6768),s=e(4232),l=e(5130);const d={class:"container"},n={class:"mt-3"},c={class:"row"},r={class:"col-md-8"},i={class:"table"},u={scope:"row",class:"border-0 px-0 font-weight-normal py-4"},p=["src"],b={class:"mb-0 fw-bold ms-3 d-inline-block"},h={key:0,class:"text-success"},k={class:"border-0 align-middle",style:{"max-width":"160px"}},m={class:"input-group pe-5"},L={class:"input-group-prepend"},f=["onClick","disabled"],y=["onUpdate:modelValue"],g={class:"input-group-append"},v=["onClick","disabled"],C={class:"border-0 align-middle"},x={key:0,class:"text-success"},w=["onClick"],_={class:"input-group w-50 mb-3"},$={class:"input-group-append"},q={class:"col-md-4"},I={class:"border p-4 mb-4"},E={class:"d-flex justify-content-between mt-4"},X={class:"mb-0 h4 fw-bold"},U={key:0,class:"justify-content-between mt-4 d-flex"},T={class:"text-end text-success"};function j(t,o,e,j,N,Q){return(0,a.uX)(),(0,a.CE)("div",d,[(0,a.Lk)("div",n,[(0,a.Lk)("div",c,[(0,a.Lk)("div",r,[(0,a.Lk)("table",i,[o[5]||(o[5]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{scope:"col",class:"border-0"},"產品名稱"),(0,a.Lk)("th",{scope:"col",class:"border-0"},"產品數量"),(0,a.Lk)("th",{scope:"col",class:"border-0"},"產品單價")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(N.cart.carts,(e=>((0,a.uX)(),(0,a.CE)("tr",{class:"border-bottom border-top",key:e.id},[(0,a.Lk)("th",u,[(0,a.Lk)("img",{src:e.product.imageUrl,alt:"",style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,p),(0,a.Lk)("p",b,(0,s.v_)(e.product.title),1),e.coupon?((0,a.uX)(),(0,a.CE)("small",h,"已套用優惠券")):(0,a.Q3)("",!0)]),(0,a.Lk)("td",k,[(0,a.Lk)("div",m,[(0,a.Lk)("div",L,[(0,a.Lk)("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon1",onClick:t=>Q.handleSub(e),disabled:e.id===N.status.loadingItem},o[2]||(o[2]=[(0,a.Lk)("i",{class:"fas fa-minus"},null,-1)]),8,f)]),(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1","onUpdate:modelValue":t=>e.qty=t},null,8,y),[[l.Jo,e.qty,void 0,{number:!0}]]),(0,a.Lk)("div",g,[(0,a.Lk)("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon2",onClick:t=>Q.handlePlus(e),disabled:e.id===N.status.loadingItem},o[3]||(o[3]=[(0,a.Lk)("i",{class:"fas fa-plus"},null,-1)]),8,v)])])]),(0,a.Lk)("td",C,[N.cart.final_total!==N.cart.total?((0,a.uX)(),(0,a.CE)("small",x,"折扣價")):(0,a.Q3)("",!0),(0,a.eW)(" NT$"+(0,s.v_)(t.$filters.currency(e.final_total)),1)]),(0,a.Lk)("td",{class:"border-0 align-middle",onClick:t=>Q.removeCart(e.id)},o[4]||(o[4]=[(0,a.Lk)("i",{class:"fas fa-times"},null,-1)]),8,w)])))),128))])]),(0,a.Lk)("div",_,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control rounded-0 border-bottom border-top-0 border-start-0 border-end-0 shadow-none","onUpdate:modelValue":o[0]||(o[0]=o=>t.coupon_code=o),placeholder:"請輸入優惠碼","aria-label":"Recipient's username","aria-describedby":"button-addon2"},null,512),[[l.Jo,t.coupon_code]]),(0,a.Lk)("div",$,[(0,a.Lk)("button",{class:"btn btn-outline-dark border-bottom border-top-0 border-start-0 border-end-0 rounded-0",type:"button",id:"button-addon2",onClick:o[1]||(o[1]=t=>Q.addCouponCode())},o[6]||(o[6]=[(0,a.Lk)("i",{class:"fas fa-paper-plane"},null,-1),(0,a.eW)(" 套用優惠碼")]))])])]),(0,a.Lk)("div",q,[(0,a.Lk)("div",I,[o[9]||(o[9]=(0,a.Lk)("h4",{class:"fw-bold mb-4"},"Order Detail",-1)),o[10]||(o[10]=(0,a.Lk)("table",{class:"table text-muted border-bottom"},[(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"付款方式"),(0,a.Lk)("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"現金付款")])])],-1)),(0,a.Lk)("div",E,[o[7]||(o[7]=(0,a.Lk)("p",{class:"mb-0 h4 fw-bold"},"Total",-1)),(0,a.Lk)("p",X,"NT$"+(0,s.v_)(t.$filters.currency(N.cart.total)),1)]),N.cart.final_total!==N.cart.total?((0,a.uX)(),(0,a.CE)("div",U,[o[8]||(o[8]=(0,a.Lk)("p",{class:"mb-0 h4 fw-bold text-success"},"折扣價",-1)),(0,a.Lk)("p",T,"NT$"+(0,s.v_)(t.$filters.currency(N.cart.final_total)),1)])):(0,a.Q3)("",!0),o[11]||(o[11]=(0,a.Lk)("a",{href:"./#/checkout",class:"btn btn-dark w-100 mt-4"},"Lorem ipsum",-1))])])])])])}var N={name:"UserCart",data(){return{cart:{},status:{loadingItem:""}}},methods:{getCart(){const t="https://vue3-course-api.hexschool.io/api/andy1234-api/cart";this.$http.get(t).then((t=>{console.log(t),this.cart=t.data.data,console.log(this.cart)}))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/andy1234-api/coupon",o={code:this.coupon_code};this.$http.post(t,{data:o}).then((t=>{console.log(t),this.getCart()}))},removeCart(t){const o=`https://vue3-course-api.hexschool.io/api/andy1234-api/cart/${t}`;this.status.loadingItem=t,this.$http.delete(o).then((t=>{this.status.loadingItem="",console.log(t),this.getCart()}))},handlePlus:function(t){t.qty++;const o=`https://vue3-course-api.hexschool.io/api/andy1234-api/cart/${t.id}`;this.isLoading=!0,this.status.loadingItem=t.id;const e={product_id:t.product_id,qty:t.qty};this.$http.put(o,{data:e}).then((t=>{console.log(t),this.status.loadingItem="",this.getCart()}))},handleSub:function(t){if(t.qty>1){t.qty--;const o=`https://vue3-course-api.hexschool.io/api/andy1234-api/cart/${t.id}`;this.isLoading=!0;const e={product_id:t.product_id,qty:t.qty};this.$http.put(o,{data:e}).then((t=>{console.log(t),this.getCart()}))}}},created(){this.getCart()}},Q=e(1241);const V=(0,Q.A)(N,[["render",j]]);var J=V}}]);
//# sourceMappingURL=460.894a93be.js.map