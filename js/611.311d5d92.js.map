{"version":3,"file":"js/611.311d5d92.js","mappings":"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","sources":["webpack://vue3-cart/./src/views/front/cart.vue","webpack://vue3-cart/./src/views/front/cart.vue?518b"],"sourcesContent":["<template>\n  <userLoading :active=\"isLoading\">\n    <div class=\"loading-bg\">\n      <img src=\"../../assets/loading-img.png\" alt=\"loading\">\n    </div>\n  </userLoading>\n  <div class=\"container\" style=\"height: 100vh;padding-top: 100px;\">\n    <div class=\"mt-3\">\n      <div class=\"row\">\n        <div class=\"col-md-8\">\n          <table class=\"table\">\n            <thead>\n              <tr>\n                <th scope=\"col\" class=\"border-0\">產品名稱</th>\n                <th scope=\"col\" class=\"border-0\">產品數量</th>\n                <th scope=\"col\" class=\"border-0\">產品價錢</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr class=\"border-bottom border-top\" v-for=\"item in cart.carts\" :key=\"item.id\">\n                <th scope=\"row\" class=\"border-0 px-0 font-weight-normal py-4\">\n                  <img :src=\"item.product.imageUrl\" alt=\"\" style=\"width: 72px; height: 72px; object-fit: cover;\">\n                  <p class=\"mb-0 fw-bold ms-3 d-inline-block\">{{ item.product.title }}</p>\n                  <small class=\"text-success\" v-if=\"item.coupon\">已套用優惠券</small>\n                </th>\n                <td class=\"border-0 align-middle\" style=\"max-width: 160px;\">\n                  <div class=\"input-group pe-5\">\n                    <div class=\"input-group-prepend\">\n                      <button class=\"btn btn-outline-dark border-0 py-2\" type=\"button\" @click=\"handleSub(item)\" :disabled=\"item.id === status.loadingItem\">\n                        <i class=\"fas fa-minus\"></i>\n                      </button>\n                    </div>\n                    <input type=\"text\" class=\"form-control border-0 text-center my-auto shadow-none\" v-model.number=\"item.qty\" readonly>\n                    <div class=\"input-group-append\">\n                      <button class=\"btn btn-outline-dark border-0 py-2\" type=\"button\" @click=\"handlePlus(item)\" :disabled=\"item.id === status.loadingItem\">\n                        <i class=\"fas fa-plus\"></i>\n                      </button>\n                    </div>\n                  </div>\n                </td>\n                <td class=\"border-0 align-middle\">\n                  <small v-if=\"cart.final_total !== cart.total\" class=\"text-success\">折扣價</small>\n                  NT${{ $filters.currency(item.final_total) }}\n                </td>\n                <td class=\"border-0 align-middle\" @click=\"removeCart(item.id)\"><i class=\"fas fa-times\"></i></td>\n              </tr>\n            </tbody>\n          </table>\n          <div class=\"input-group w-50 mb-3\">\n            <input type=\"text\" class=\"form-control rounded-0 border-bottom border-top-0 border-start-0 border-end-0 shadow-none\" v-model=\"coupon_code\" placeholder=\"請輸入優惠碼\" aria-label=\"Recipient's username\" aria-describedby=\"button-addon2\">\n            <div class=\"input-group-append\">\n              <button class=\"btn btn-outline-dark border-bottom border-top-0 border-start-0 border-end-0 rounded-0\" type=\"button\" @click=\"addCouponCode()\"><i class=\"fas fa-paper-plane\"></i> 套用優惠碼</button>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-md-4\">\n          <div class=\"border p-4 mb-4\">\n            <h4 class=\"fw-bold mb-4\">訂單總價</h4>\n            <table class=\"table text-muted border-bottom\">\n              <tbody>\n                <tr>\n                  <th scope=\"row\" class=\"border-0 px-0 pt-0 pb-4 font-weight-normal\">付款方式</th>\n                  <td class=\"text-end border-0 px-0 pt-0 pb-4\">現金付款</td>\n                </tr>\n              </tbody>\n            </table>\n            <div class=\"d-flex justify-content-between mt-4\">\n              <p class=\"mb-0 h4 fw-bold\">總價</p>\n              <p class=\"mb-0 h4 fw-bold\">NT${{ $filters.currency(cart.total) }}</p>\n            </div>\n            <div class=\"justify-content-between mt-4 d-flex\" v-if=\"cart.final_total !== cart.total\">\n              <p class=\"mb-0 h4 fw-bold text-success\">折扣價</p>\n              <p class=\"text-end text-success\">NT${{ $filters.currency(cart.final_total) }}</p>\n            </div>\n            <a href=\"./#/checkout\" class=\"btn btn-dark w-100 mt-4\">確認送出</a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style>\n/* .icon-group {\n  display: none;\n} */\n</style>\n\n<script>\nimport emitter from '@/methods/emitter';\n\nexport default {\n  name: \"UserCart\",\n  data() {\n    return {\n      cart: {},\n      coupon_code: '',\n      status: {\n        loadingItem: \"\",\n      }\n    }\n  },\n  methods: {\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoading = true;\n      this.$http.get(url).then((response) => {\n        this.cart = response.data.data;\n        this.isLoading = false;\n      }).catch((error) => {\n        console.error('獲取購物車失敗:', error);\n      });\n    },\n    addCouponCode() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n      const coupon = {\n        code: this.coupon_code,\n      };\n      this.$http.post(url, { data: coupon }).then((response) => {\n        this.$httpMessageState(response, '套用優惠碼');\n        this.getCart();\n        emitter.emit('update-cart'); // 發送更新事件\n      }).catch((error) => {\n        console.error('套用優惠碼失敗:', error);\n        this.$httpMessageState({ success: false }, '套用優惠碼失敗');\n      });\n    },\n    removeCart(id) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\n      this.status.loadingItem = id;\n      this.$http.delete(url).then((response) => {\n        this.$httpMessageState(response, '移除購物車');\n        this.status.loadingItem = '';\n        this.getCart();\n        emitter.emit('update-cart'); // 發送更新事件\n      }).catch((error) => {\n        console.error('移除購物車失敗:', error);\n        this.status.loadingItem = '';\n        this.$httpMessageState({ success: false }, '移除購物車失敗');\n      });\n    },\n    handlePlus(item) {\n      item.qty++;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      this.status.loadingItem = item.id;\n      const cart = {\n        product_id: item.product_id,\n        qty: item.qty,\n      };\n      this.$http.put(url, { data: cart }).then((response) => {\n        this.status.loadingItem = '';\n        this.getCart();\n        emitter.emit('update-cart'); // 發送更新事件\n      }).catch((error) => {\n        console.error('更新數量失敗:', error);\n        this.status.loadingItem = '';\n        this.$httpMessageState({ success: false }, '更新數量失敗');\n      });\n    },\n    handleSub(item) {\n      if (item.qty > 1) {\n        item.qty--;\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n        this.status.loadingItem = item.id;\n        const cart = {\n          product_id: item.product_id,\n          qty: item.qty,\n        };\n        this.$http.put(url, { data: cart }).then((response) => {\n          this.status.loadingItem = '';\n          this.getCart();\n          emitter.emit('update-cart'); // 發送更新事件\n        }).catch((error) => {\n          console.error('更新數量失敗:', error);\n          this.status.loadingItem = '';\n          this.$httpMessageState({ success: false }, '更新數量失敗');\n        });\n      }\n    },\n  },\n  created() {\n    this.getCart();\n  }\n}\n</script>","import { render } from \"./cart.vue?vue&type=template&id=47165082\"\nimport script from \"./cart.vue?vue&type=script&lang=js\"\nexport * from \"./cart.vue?vue&type=script&lang=js\"\n\nimport \"./cart.vue?vue&type=style&index=0&id=47165082&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","style","scope","key","_createElementBlock","_Fragment","_createVNode","_component_userLoading","active","_ctx","isLoading","default","_withCtx","_cache","_createElementVNode","src","_imports_0","alt","_","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_renderList","$data","cart","carts","item","id","_hoisted_6","product","imageUrl","_hoisted_7","_hoisted_8","_toDisplayString","title","coupon","_hoisted_9","_createCommentVNode","_hoisted_10","_hoisted_11","_hoisted_12","type","onClick","$event","$options","handleSub","disabled","status","loadingItem","_hoisted_13","qty","readonly","_hoisted_14","number","_hoisted_15","handlePlus","_hoisted_16","_hoisted_17","final_total","total","_hoisted_18","_createTextVNode","$filters","currency","removeCart","_hoisted_19","_hoisted_20","coupon_code","placeholder","_hoisted_21","addCouponCode","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","href","name","data","methods","getCart","url","this","$http","get","then","response","catch","error","console","code","post","$httpMessageState","emitter","emit","success","delete","product_id","put","created","__exports__","render"],"sourceRoot":""}