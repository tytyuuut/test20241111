"use strict";(self["webpackChunkvue3_cart"]=self["webpackChunkvue3_cart"]||[]).push([[632],{3632:function(t,s,a){a.r(s),a.d(s,{default:function(){return $}});var i=a(6768),c=a(4232),d=a(5432);const e={class:"container",style:{"padding-top":"100px"}},o={class:"row align-items-center"},n={class:"col-md-7"},r=["src"],l={class:"col-md-5"},u={class:"fw-bold h1 mb-1"},p={class:"h4 fw-bold text-end"},h={class:"row align-items-center"},g={class:"col-6"},k=["disabled"],m={key:0,class:"spinner-grow spinner-grow-sm",role:"status"},v={key:1},L={class:"row my-5"},b={class:"col-md-4"},w={class:"col-md-3"},f={class:"text-muted"};function y(t,s,a,y,C,_){const x=(0,i.g2)("userLoading");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(x,{active:C.isLoading},{default:(0,i.k6)((()=>s[1]||(s[1]=[(0,i.Lk)("div",{class:"loading-bg"},[(0,i.Lk)("img",{src:d,alt:"loading"})],-1)]))),_:1},8,["active"]),(0,i.Lk)("div",e,[(0,i.Lk)("div",o,[(0,i.Lk)("div",n,[(0,i.Lk)("img",{src:C.product.imageUrl,class:"d-block w-100",alt:"..."},null,8,r)]),(0,i.Lk)("div",l,[(0,i.Lk)("h2",u,(0,c.v_)(C.product.title),1),(0,i.Lk)("p",p,"NT$"+(0,c.v_)(C.product.price),1),(0,i.Lk)("div",h,[(0,i.Lk)("div",g,[(0,i.Lk)("button",{onClick:s[0]||(s[0]=t=>_.addToCart(C.product.id)),class:"text-nowrap btn btn-dark w-100 py-2",disabled:C.status.loadingItem===C.product.id},[C.status.loadingItem===C.product.id?((0,i.uX)(),(0,i.CE)("span",m)):((0,i.uX)(),(0,i.CE)("span",v,"加入購物車"))],8,k)])])])]),(0,i.Lk)("div",L,[(0,i.Lk)("div",b,[(0,i.Lk)("p",null,(0,c.v_)(C.product.content),1)]),(0,i.Lk)("div",w,[(0,i.Lk)("p",f,(0,c.v_)(C.product.description),1)])])])],64)}var C=a(1600),_={name:"UserDetail",data(){return{product:{},status:{loadingItem:""},isLoading:!1}},methods:{getProduct(){const t=`https://vue3-course-api.hexschool.io/api/andy1234-api/product/${this.id}`;this.isLoading=!0,this.$http.get(t).then((t=>{this.product=t.data.product,this.isLoading=!1})).catch((t=>{console.error("獲取產品詳情失敗:",t),this.isLoading=!1}))},addToCart(t){const s="https://vue3-course-api.hexschool.io/api/andy1234-api/cart";this.status.loadingItem=t;const a={product_id:t,qty:1};this.$http.post(s,{data:a}).then((t=>{this.status.loadingItem="",this.$httpMessageState(t,"加入購物車"),t.data.success&&C.A.emit("update-cart")})).catch((t=>{this.status.loadingItem="",console.error("添加到購物車失敗:",t),this.$httpMessageState({success:!1},"加入購物車失敗")}))}},created(){this.id=this.$route.params.productId,this.getProduct()}},x=a(1241);const I=(0,x.A)(_,[["render",y]]);var $=I},5432:function(t,s,a){t.exports=a.p+"img/loading-img.aeb4fba1.png"}}]);
//# sourceMappingURL=632.85a1e469.js.map