"use strict";(self["webpackChunkvue3_cart"]=self["webpackChunkvue3_cart"]||[]).push([[674],{8674:function(e,s,t){t.r(s),t.d(s,{default:function(){return U}});var a=t(6768),l=t(4232),r=t(5130);const o={class:"container"},d={class:"row flex-row-reverse justify-content-center pb-5"},c={class:"col-md-4"},i={class:"border p-4 mb-4"},n=["src"],m={class:"w-100"},u={class:"d-flex justify-content-between"},b={class:"mb-0 fw-bold"},p={class:"border-0 align-middle"},h={class:"mb-0 fw-bold"},f={class:"table mt-4 border-top border-bottom text-muted"},k={class:"text-end border-0 px-0 pt-4"},v={class:"d-flex justify-content-between mt-4"},L={class:"mb-0 h4 fw-bold"},g={class:"col-md-6"},x={class:"mb-0"},w={class:"mb-2"},y={class:"mb-2"},C={class:"mb-2"},V={class:"mb-2"};function F(e,s,t,F,$,_){const I=(0,a.g2)("useField"),U=(0,a.g2)("ErrorMsg"),j=(0,a.g2)("useForm");return(0,a.uX)(),(0,a.CE)("div",o,[s[14]||(s[14]=(0,a.Lk)("div",{class:"row justify-content-center"},[(0,a.Lk)("div",{class:"col-md-10"},[(0,a.Lk)("h3",{class:"fw-bold mb-4 pt-3"},"Checkout")])],-1)),(0,a.Lk)("div",d,[(0,a.Lk)("div",c,[(0,a.Lk)("div",i,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)($.cart.carts,(s=>((0,a.uX)(),(0,a.CE)("div",{class:"d-flex",key:s.id},[(0,a.Lk)("img",{src:s.product.imageUrl,alt:"",class:"me-2",style:{width:"48px",height:"48px","object-fit":"cover"}},null,8,n),(0,a.Lk)("div",m,[(0,a.Lk)("div",u,[(0,a.Lk)("p",b,(0,l.v_)(s.product.title),1),(0,a.Lk)("td",p," NT$"+(0,l.v_)(e.$filters.currency(s.final_total)),1)]),(0,a.Lk)("p",h,"x "+(0,l.v_)(s.qty),1)])])))),128)),(0,a.Lk)("table",f,[(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[s[5]||(s[5]=(0,a.Lk)("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"Subtotal",-1)),(0,a.Lk)("td",k,"NT$"+(0,l.v_)($.cart.final_total),1)]),s[6]||(s[6]=(0,a.Lk)("tr",null,[(0,a.Lk)("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"付款方式"),(0,a.Lk)("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"現金結帳")],-1))])]),(0,a.Lk)("div",v,[s[7]||(s[7]=(0,a.Lk)("p",{class:"mb-0 h4 fw-bold"},"Total",-1)),(0,a.Lk)("p",L,"NT$"+(0,l.v_)($.cart.final_total),1)])])]),(0,a.Lk)("div",g,[(0,a.bF)(j,{onSubmit:_.createOrder},{default:(0,a.k6)((({errors:e})=>[(0,a.Lk)("div",x,[s[8]||(s[8]=(0,a.Lk)("label",{for:"email",class:"text-muted mb-0"},"Email",-1)),(0,a.bF)(I,{id:"email",name:"email",type:"email",class:(0,l.C4)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入電子信箱",rules:"email|required",modelValue:$.form.user.email,"onUpdate:modelValue":s[0]||(s[0]=e=>$.form.user.email=e)},null,8,["class","modelValue"]),(0,a.bF)(U,{name:"email",class:"invalid-feedback"})]),(0,a.Lk)("div",w,[s[9]||(s[9]=(0,a.Lk)("label",{for:"name",class:"text-muted mb-0"},"收件人姓名",-1)),(0,a.bF)(I,{id:"name",name:"name",type:"text",class:(0,l.C4)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:$.form.user.name,"onUpdate:modelValue":s[1]||(s[1]=e=>$.form.user.name=e)},null,8,["class","modelValue"]),(0,a.bF)(U,{name:"姓名",class:"invalid-feedback"})]),(0,a.Lk)("div",y,[s[10]||(s[10]=(0,a.Lk)("label",{for:"tel",class:"text-muted mb-0"},"收件人電話",-1)),(0,a.bF)(I,{type:"tel",name:"電話",class:(0,l.C4)(["form-control",{"is-invalid":e["電話"]}]),id:"tel",placeholder:"請輸入電話",rules:"required",modelValue:$.form.user.tel,"onUpdate:modelValue":s[2]||(s[2]=e=>$.form.user.tel=e)},null,8,["class","modelValue"]),(0,a.bF)(U,{name:"電話",class:"invalid-feedback"})]),(0,a.Lk)("div",C,[s[11]||(s[11]=(0,a.Lk)("label",{for:"address",class:"text-muted mb-0"},"收件人地址",-1)),(0,a.bF)(I,{type:"text",name:"地址",class:(0,l.C4)(["form-control",{"is-invalid":e["地址"]}]),id:"address",placeholder:"請輸入電話",rules:"required",modelValue:$.form.user.address,"onUpdate:modelValue":s[3]||(s[3]=e=>$.form.user.address=e)},null,8,["class","modelValue"]),(0,a.bF)(U,{name:"地址",class:"invalid-feedback"})]),(0,a.Lk)("div",V,[s[12]||(s[12]=(0,a.Lk)("label",{for:"message",class:"text-muted mb-0"},"留言",-1)),(0,a.bo)((0,a.Lk)("textarea",{class:"form-control",rows:"3",id:"message",placeholder:"message ... ","onUpdate:modelValue":s[4]||(s[4]=e=>$.form.message=e)},null,512),[[r.Jo,$.form.message]])]),s[13]||(s[13]=(0,a.Lk)("div",{class:"text-end"},[(0,a.Lk)("button",{class:"btn btn-danger"},"送出訂單")],-1))])),_:1},8,["onSubmit"])])])])}t(4114);var $={name:"UserCheckout",data(){return{cart:{},form:{user:{name:"",email:"",tel:"",address:""},message:""},orderId:""}},methods:{getCart(){const e="https://vue3-course-api.hexschool.io/api/andy1234-api/cart";this.isLoading=!0,this.$http.get(e).then((e=>{console.log(e),this.cart=e.data.data,console.log(this.cart),this.isLoading=!1}))},createOrder(){console.log("Create");const e="https://vue3-course-api.hexschool.io/api/andy1234-api/order",s=this.form;this.$http.post(e,{data:s}).then((e=>{if(e.data.success){const s=e.data.orderId;this.$router.push({path:`/checkout/${s}`})}else console.error("建立訂單失敗:",e.data.message)}))},getOrder(){const e=`https://vue3-course-api.hexschool.io/api/andy1234-api/order/${this.orderId}`;this.$http.get(e).then((e=>{console.log(e),e.data.success&&(console.log(e.data.order),this.order=e.data.order,console.log(this.order))}))}},created(){this.orderId=this.$route.params.orderId,console.log(this.orderId),this.getCart(),this.getOrder()}},_=t(1241);const I=(0,_.A)($,[["render",F]]);var U=I}}]);
//# sourceMappingURL=674.088556eb.js.map